<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <title>Plano español</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <script src="https://unpkg.com/ml5@0.7.1/dist/ml5.min.js"></script>
    <link rel="stylesheet" href="css/estilosespañol.css">
    <link rel="stylesheet" href="css/styles.css">
</head>

<script>

    var recognition = new webkitSpeechRecognition();
    recognition.lang = 'es-ES'; // Idioma de reconocimiento de voz
    recognition.continuous = false;
    recognition.interimResults = false;

    function mostrarAlerta() {
        var alerta = document.querySelector('.alerta');
        alerta.classList.add('mostrando');
        setTimeout(function () {
            alerta.classList.remove('mostrando');
        }, 60000); // 60000 milisegundos = 1 minuto
    }

    recognition.onresult = function (event) {
        var transcript = event.results[0][0].transcript.toLowerCase();
        if (transcript.indexOf("colores") !== -1) {
            mostrarAlerta();
        }
    };

    recognition.onerror = function (event) {
        console.log('Error de reconocimiento de voz: ', event.error);
    };

    function startRecognition() {
        recognition.onresult = function (event) {
            const command = event.results[0][0].transcript;
            //habitacion principal
            if (command.includes('abrir puerta habitación principal')) {
                document.getElementById('puerta-hab-principal').style.backgroundColor = 'green';
            } else if (command.includes('cerrar puerta habitación principal')) {
                document.getElementById('puerta-hab-principal').style.backgroundColor = 'blue';
            }else if (command.includes('abrir ventana habitación principal')) {
                document.getElementById('ventana-hab-principal').style.backgroundColor = 'blue';
            }else if (command.includes('cerrar ventana habitación principal')) {
                document.getElementById('ventana-hab-principal').style.backgroundColor = 'red';
            }else if (command.includes('encender bombillo habitación principal')) {
                document.getElementById('bombillo-hab-principal').style.backgroundColor = 'yellow';
            }else if (command.includes('apagar bombillo habitación principal')) {
                document.getElementById('bombillo-hab-principal').style.backgroundColor = 'grey';
            }else if (command.includes('encender calefación habitación principal')) {
                document.getElementById('calefacion-hab-principal').style.backgroundColor = 'green';
            }else if (command.includes('apagar calefación habitación principal')) {
                document.getElementById('calefacion-hab-principal').style.backgroundColor = 'red';
            }else if (command.includes('encender televisión habitación principal')) {
                document.getElementById('tv-hab-principal').style.backgroundColor = 'green';
            }else if (command.includes('apagar televisión habitación principal')) {
                document.getElementById('tv-hab-principal').style.backgroundColor = 'orange';
            }
            //habitacion 2
            else if (command.includes('abrir puerta habitación 2')) {
                document.getElementById('puerta-hab-principal2').style.backgroundColor = 'blue';
            }else if (command.includes('cerrar puerta habitación 2')) {
                document.getElementById('puerta-hab-principal2').style.backgroundColor = 'blue';
            }else if (command.includes('abrir ventana habitación 2')) {
                document.getElementById('ventana-hab-principal2').style.backgroundColor = 'blue';
            }else if (command.includes('cerrar ventana habitación 2')) {
                document.getElementById('ventana-hab-principal2').style.backgroundColor = 'red';
            }else if (command.includes('encender bombillo habitación 2')) {
                document.getElementById('bombillo-hab-principal2').style.backgroundColor = 'yellow';
            }else if (command.includes('apagar bombillo habitación 2')) {
                document.getElementById('bombillo-hab-principal2').style.backgroundColor = 'grey';
            }else if (command.includes('encender calefación habitación 2')) {
                document.getElementById('calefacion-hab-principal2').style.backgroundColor = 'green';
            }else if (command.includes('apagar calefación habitación 2')) {
                document.getElementById('calefacion-hab-principal2').style.backgroundColor = 'red';
            }else if (command.includes('encender televisión habitación 2')) {
                document.getElementById('tv-hab-principal2').style.backgroundColor = 'green';
            }else if (command.includes('apagar televisión habitación 2')) {
                document.getElementById('tv-hab-principal2').style.backgroundColor = 'orange';
            }
            recognition.continuous = true;
        recognition.start();
        }   
    }
</script>

<body>

    <div id="colores" class="btn" onclick="mostrarAlerta()">colores de objetos</div>
    <div class="alerta">
        <ol class="sin-numero">
            <li>Objetos casa:</li>
            <li>Luz ->  encendido <span class="cuadrito2"></span></li>
            <li>Ventanas -> cerradas <span class="cuadrito3"></span></li>
            <li>Puertas ->  cerradas <span class="cuadrito5"></span></li>
            <li>Televisores ->  encendidos <span class="cuadrito6"></span></li>
            <li>Calefacciones -> encendidas <span class="cuadrito4"></span>
            <li>Roseadores -> encendidos <span class="cuadrito"></span>
            <li>Aspiradora -> encendida <span class="cuadrito7"></span>   
            </li>    
        </ol>
        <li class="sin-numero">Al estar cerrados o apagados los objetos de la casa no se mostrara ningun color</li>
        <li class="sin-numero">Este mensaje  se cerrará automáticamente en 1 minuto.</li>
    </div>
    <div class="botonactivar" onclick="startRecognition()"> Activar voz</div>
    <div class="centrado">
        <div class="alert alert-primary " role="alert">
            <img src="imagenes\imginfo.png" width="90" height="50">
            <strong>Recomendación!</strong>
            Se aconseja al usuario tener la página web con zoom al 75%, para visualizar correctamente el plano.
        </div>
        <h1></h1>
        <h1></h1>
        <h1>Plano casa inteligente</h1>
        <img id="plano" src="imagenes/planoespañol.png" alt="Plano en español">
        
        <div >
            <button id="detectionAction" onclick="toggleDetecting()">Iniciar detección</button>
        </div>
        <script src="app.js"></script>
        
        <!--Objetos habitacion principal-->
        <div class="puertahabprincipal" id="puerta-hab-principal"></div>
        <div class="ventanahabprincipal" id="ventana-hab-principal"></div>
        <div class="bombillohabprincipal" id="bombillo-hab-principal"></div>
        <div class="calefacionhabprincipal " id="calefacion-hab-principal"></div>
        <div class="tvhabprincipal" id="tv-hab-principal"></div>
        <!--Objetos habitacion principal 2-->
        <div class="puertahabprincipal2" id="puerta-hab-principal2"></div>
        <div class="ventanahabprincipal2" id="ventana-hab-principal2"></div>
        <div class="bombillohabprincipal2" id="bombillo-hab-principal2"></div>
        <div class="calefacionhabprincipal2 " id="calefacion-hab-principal2"></div>
        <div class="tvhabprincipal2" id="tv-hab-principal2"></div>

        <!--Objetos habitacion 3-->
        <div class="puertahab3" id="puerta-hab-3"></div>
        <div class="ventanahab3" id="ventana-hab-3"></div>
        <div class="bombillohab3" id="bombillo-hab-3"></div>
        <div class="calefacionhab3 " id="calefacion-3"></div>


        <!--Objetos baño principal-->
        <div class="puertabañoprincipal" id="puerta-baño-principal"></div>
        <div class="ventanabañoprincipal" id="ventana-baño-principal"></div>
        <div class="bombillobañoprincipal" id="bombillo-baño-principal"></div>

        <!--Objetos baño 2-->
        <div class="puertabaño2" id="puerta-baño2"></div>
        <div class="ventanabaño2" id="ventana-baño2"></div>
        <div class="bombillobaño2" id="bombillo-baño2"></div>

        <!--Objetos zona lavado-->
        <div class="puertazonalavado" id="puerta-zona-lavado"></div>
        <div class="ventanazonalavado" id="ventana-zona-lavado"></div>
        <div class="bombillozonalavado" id="bombillo-zona-lavado"></div>

        <!--Objetos cocina-->
        <div class="ventanacocina" id="ventana-cocina"></div>
        <div class="bombillococina" id="bombillo-cocina"></div>

        <!--Objetos alacena-->
        <div class="puertaalacena" id="ventana-alacena"></div>
        <div class="bombilloalacena" id="bombillo-alacena"></div>
        
        <!--Objetos sala-->
        <div class="puertasala" id="puerta-sala"></div>
        <div class="ventanasala" id="ventana-sala"></div>
        <div class="bombillosala" id="bombillo-sala"></div>
        <div class="calefacionsala " id="calefacion-sala"></div>
        <div class="aspiradora " id="aspiradora"></div>

        <!--Objetos parqueadero-->
        <div class="puertaentradapar" id="puerta-entrada-parqueadero"></div>
        <div class="puertaentradasalapar" id="puerta-entradasala-parqueadero"></div>
        <div class="bombilloparqueadero" id="bombillo-parqueadero"></div>

        <!--Objetos roseador-->
        <div class="roseador1" id="roseador-1"></div>
        <div class="roseador2" id="roseador-2"></div>
    </div>

</body>

</html>